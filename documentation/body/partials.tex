\newpage
\chapter*{Partials}
\addcontentsline{toc}{chapter}{Partials}
% Chapter for each research question
% how we validated it and proved it worked


Partials are reusable \gls{HTML} snippets that you can be embed into a template file and render, this helps you modularise your development. By splitting up the code into partials, you are:

\begin{itemize}
	\item Keeping your code clean and systematic
	\item Adhering to the \gls{DRY} philosophy
	\item Creating reusability
	\item Aid in fragment caching
\end{itemize}

Not all modern browsers have full support for partials, and templates as seen on the website caniuse \citep*{CANI17}. In order to achieve partials, and templates, Taylor'd UI is using nunjucks a rich and powerful templating engine. 

If you are not comfortable in learning how to break the \gls{HTML} into partials, and just want the \gls{HTML} file to play around with, the file \latinword{index.html} can be found in the parent directory.

Before starting, from the terminal enter in the commands seen below, the first will install gulp, the second will install nunjucks:

\begin{lstlisting}[language=HTML]
npm install gulp-cli -g
npm install gulp-nunjucks-render --save-dev
\end{lstlisting}

A package.json file will then need to be created, this will configure the Node / NPM packages. Following this, create a \latinword{gulp.js} file, and place it in your main folder. Open the file and add the two following lines to the top.:

\begin{lstlisting}[language=HTML]
var gulp = require('gulp');
var nunjucksRender = require('gulp-nunjucks-render');
\end{lstlisting}

The \latinword{gulp.js} file tells gulp what to do. In this file, we will be adding in the tasks we want gulp to run.

Next, create a folder structure similar to layout structure as seen in figure \ref{fig:structure}. The templates folder is used for storing the Nunjucks partials, and any other Nunjucks files that will be added to files in the pages folder. The pages folder is used for storing files that will be compiled into \gls{HTML}. Once they are compiled, they will be created in the blog folder.

Create a file and call it \latinword{layout.nunjucks}. The layout file will contain the template \gls{HTML} code such as title, and links to external files such as the\gls{CSS}.
{
  name={CSS},
  description={Cascading Stylesheets},
  sort=CSS
}, see below for an example.

\begin{lstlisting}[language=HTML]
<!-- layout.nunjucks -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple Blog</title>
  <link rel="stylesheet" href="css/taylord.css" />
</head>
<body>

  <!-- You write code for this content block in another file -->
  {% block content %} {% endblock %}
</body>
</html>
\end{lstlisting}

In the pages folder, create a file called \latinword{index.nunjucks}. This file will ultimately be converted into index.html and placed in the blog folder. The \latinword{index.nunjucks} extends the \latinword{layout.nunjucks} file, this means it contains all the template code written in the layout file. 

 \gls{HTML} code that is specific to \latinword{index.nunjucks} between the two block as seen below: 

\begin{lstlisting}[language=HTML]
{% block content %}
<h1>This is our example heading</h1>
{% endblock %}
\end{lstlisting}

To generate the \latinword{index.html} file, a nunjucks task needs to be created that will do the conversion for us. Add the following code to the \latinword{gulp.js} file.  

\begin{lstlisting}[language=HTML]
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple Blog</title>
  <link rel="stylesheet" href="css/taylord.css">
</head>
<body>
  <h1>This is our example heading</h1>
</body>
</html>
\end{lstlisting}

Run \latinword{gulp nunjucks} from the terminal, you should see a new file called \latinword{index.html} created in the root folder. Open the file in a text editor. What you will find is something similar to below, a html file containing all the code from the layout file, and a heading that we added. 

\begin{lstlisting}[language=HTML]
gulp.task('nunjucks', function() {
  // Gets .html and .nunjucks files in pages
  return gulp.src('blog/pages/**/*.+(html|nunjucks)')
  // Renders template with nunjucks
  .pipe(nunjucksRender({
      path: ['blog/templates']
    }))
  // output files in app folder
  .pipe(gulp.dest('blog'))
});
\end{lstlisting}

Moving on to the next stage, partials. Create a new file called \latinword{nav.nunjucks} in the partial folder. Create a navigation class like below: 


\begin{lstlisting}[language=HTML]
  <nav>
    <ul>
      <li><a href="#" class="current">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Work</a></li>
      <li><a href="#">Blog</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </nav>
\end{lstlisting}

Then add the following snippet to the layout file. This tells the \latinword{layout.nunjucks} file to include the navigation partial when it compiles. Run \latinword{gulp nunjucks} again.
\begin{lstlisting}[language=CSS3]
{% include "partials/navigation.nunjucks" %}
\end{lstlisting}

Open the file in a text editor, and you should see something similar. Remember the placement if the include statement determines where the code is placed in the compiled HTML file. 

\begin{lstlisting}[language=HTML]
\begin{lstlisting}[language=HTML]
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple Blog</title>
  <link rel="stylesheet" href="css/taylord.css">
</head>
<body>
  <nav>
    <ul>
      <li><a href="#" class="current">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Work</a></li>
      <li><a href="#">Blog</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </nav>
  <h1>This is our example heading</h1>
</body>
</html>
\end{lstlisting}

You have now built your first template, and partial. You can now  use the same navigation partial in other websites. Follow the exact same steps to create other partials like the footer, and any other content that you feel is either repeated or can be used elsewhere. 